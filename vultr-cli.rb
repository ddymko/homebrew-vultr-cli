# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class VultrCli < Formula
  desc "Official command-line tool for Vultr services"
  homepage "https://github.com/vultr/vultr-cli"
  version "3.4.0"

  on_macos do
    on_intel do
      url "https://github.com/vultr/vultr-cli/releases/download/v3.4.0/vultr-cli_v3.4.0_macOs_amd64.tar.gz"
      sha256 "3e868ba521c8d580d89c811061112fd7f3f0e837e0a08e9d0a00ae8aaaeebbbd"

      def install
        bin.install "vultr-cli"
        prefix.install_metafiles
      end
    end
    on_arm do
      url "https://github.com/vultr/vultr-cli/releases/download/v3.4.0/vultr-cli_v3.4.0_macOs_arm64.tar.gz"
      sha256 "746a25e1dcb139b14610c92d2e8f24e7b227090c215eb7252167fa4bd899d150"

      def install
        bin.install "vultr-cli"
        prefix.install_metafiles
      end
    end
  end

  on_linux do
    on_intel do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/vultr/vultr-cli/releases/download/v3.4.0/vultr-cli_v3.4.0_linux_amd64.tar.gz"
        sha256 "3c9b1c7c4762dd0fc6354feb2867fe47d6b394dce9e558df1ed2c7e3e0ad320e"

        def install
          bin.install "vultr-cli"
          prefix.install_metafiles
        end
      end
    end
    on_arm do
      if !Hardware::CPU.is_64_bit?
        url "https://github.com/vultr/vultr-cli/releases/download/v3.4.0/vultr-cli_v3.4.0_linux_arm32-v6.tar.gz"
        sha256 "b0ba88f8dec9e592b9c709b7a7285568a2a994dad62813b52c9e1b06ef95f544"

        def install
          bin.install "vultr-cli"
          prefix.install_metafiles
        end
      end
    end
    on_arm do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/vultr/vultr-cli/releases/download/v3.4.0/vultr-cli_v3.4.0_linux_arm64.tar.gz"
        sha256 "cf46b1d0f27990a0c7c07561eabfd8123487ac71d774bfb73221793743a05de2"

        def install
          bin.install "vultr-cli"
          prefix.install_metafiles
        end
      end
    end
  end

  test do
    output = shell_output("#{bin}/vultr-cli version 2>&1", 1)
    assert_match "Please export your VULTR API key as an environment variable or add `api-key` to your config file, eg:\nexport VULTR_API_KEY='<api_key_from_vultr_account>'\n", output
  end
end
